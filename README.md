# Go Short URL

网址缩短工具，使用 Go 语言实现。

## 数据表设计

### 用户表

```sql
CREATE TABLE IF NOT EXISTS `go_short_url_user` (
   `id` INT AUTO_INSCREMENT PRIMART_KEY,
   `username` VARCHAR(20) NOT
)
```

## 用户登录概述

1. 用户在前端输入用户名和密码，发送给后端。
2. 后端获得明文密码，将其与数据库中的哈希密码对比。
3. 用户注册时，则创建一个哈希密码。
4. 用户更新密码时，则更新哈希密码。

## 功能概述

1. **用户管理**

   - **注册和登录**：支持用户注册和登录功能。
   - **密码管理**：支持密码重置和更改。
   - **用户角色**：区分普通用户和管理员用户。

2. **短链接生成与管理**

   - **短链接生成**：允许用户输入一个长链接并生成对应的短链接。
   - **短链接管理**：用户可以查看、编辑和删除自己的短链接。
   - **自定义短链接**：允许用户自定义短链接的后缀。
   - **批量生成**：支持批量生成短链接。

3. **短链接重定向**

   - **重定向服务**：短链接访问后重定向到原始长链接。
   - **访问统计**：记录短链接的访问次数、来源 IP、访问时间等。

4. **分析和报告**

   - **访问分析**：提供短链接访问数据的可视化报告，如访问次数、地域分布等。
   - **导出数据**：支持导出短链接访问数据。

5. **安全和隐私**

   - **短链接有效期**：支持设置短链接的有效期。
   - **访问控制**：支持设置短链接的访问权限，如仅自己可见、公开、密码保护等。
   - **防滥用**：监控和防止恶意生成短链接。

6. **API 支持**

   - **API 接口**：提供 API 接口，方便开发者集成短链接服务。
   - **API 文档**：提供详细的 API 使用文档。

7. **前端功能**
   - **用户界面**：简洁直观的用户界面，方便用户生成和管理短链接。
   - **响应式设计**：支持移动端和 PC 端访问。

## 关于时区的设置

1. UTC 时间，指的是世界统一的时间，UTC 时间的时区是固定的，在同一时刻，世界上任何一个角落的 UTC 时间是同一个值。
2. ISO 格式，指的是 `2024-07-22T19:59:10Z` 这种时间格式。
3. 前端真正展示的时间可以根据前端的时区自动转换显示，但是后端发给前端的时间，一定是固定的，并且包含时区信息的。UTC 也是包含时区的，只不过时区是 0，是固定的 0。所以，后端机器的时区是什么，无所谓，但是后端机器的时区一定要是确定的，比如固定设置成 +08:00，这样打开数据库看到的 Datetime 就都是中国的时间。后端如果要存储来自前端发送的时间，那前端的时间就务必要带时区信息，不然服务器根本不知道，前端传来的时间到底是哪个时区的。而后端，只要固定本地的时区，比如 +08:00，这时候接收到前端发来的一个时间，这个时间包含了时区信息，所以它就是一个确定的时间，只需要将这些前端杂七杂八的时区的时间，统一转换成 +08:00 的时区，然后存入数据库，就可以了。
4. 概括第 3 点，前端发送给后端的时间字符串，必须带上前端的时区，为了方便，统一要求前端传 UTC 给后端，也就是 0 时区。后端的时区必须固定，可以以服务器端人员的生活习惯来确定时区，比如 +08:00。要确保，MySQL Datetime 字段存的时间，必须是同一个时区的时间，后期永远不能更换时区，否则就要更新 Datetime 列的原来的全部时间到新的时区。
5. 再次简单概括 3 和 4 点，后端需要约定一个时区，这个时区取开发人员生活的时区。一个确定的时间点，是必须携带时区信息的，否则是无效的时间，而前端传给后端的时区各种各样，后端需要先将这些不同时区的时间转换为约定好的统一时区，然后以统一的时区存入数据库。